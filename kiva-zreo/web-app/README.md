# KiVa WebApp

## Technologies

- [HTML/CSS](https://www.w3.org/Style/Examples/011/firstcss.fr.html)
  [Cours](https://openclassrooms.com/fr/courses/1603881-apprenez-a-creer-votre-site-web-avec-html5-et-css3)
- [JavaScript](https://fr.wikipedia.org/wiki/JavaScript)
  [Tuto](http://www.siteduzero.com/tutoriel-3-309961-dynamisez-vos-sites-web-avec-javascript.html)
- [jQuery](https://jquery.com/) a nice lib for DOM and Ajax
  [Online Course](https://openclassrooms.com/fr/courses/3504441-introduction-a-jquery-4)
  [Another](https://openclassrooms.com/fr/courses/1567926-un-site-web-dynamique-avec-jquery)

Peut-être :

- [CodePen](https://codepen.io/)
- …

## JQuery Short Primer

Put a (unique) `id` or a `class` on html components you want to manipulate from javascript:

```html
<input id="clef" class="champs" type="text" size="10" value="Calvin" />
<input id="valeur" class="champs" type="text" size="10" value="Hobbes" />
<button id="aller">Aller</button>
<label id="message">Bonjour !</label>
<div id="tableau"> … </div>
```

Then the components can be retrieved with:

```js
$("#config")    // the `config` division
$("#clef")      // the `clef` input field
$(".champs")    // all elements of class `champs`
$("#aller")     // the `aller` button
$("#message")   // the `message` label
$("#tableau")   // the `tableau` division
```

You can accumulate:

```js
$("#tableau td tr") // in division `tableau`, all `tr` fields in a `td`
```

Depending on the object type, you can call various methods to change its state:

```js
let ancien = $("#clef").val()       // get text in input field
$("#clef").val("*" + ancien + "*")  // replace by same with `*` added
$("#message").text("Hello!")        // change label text
$("#tableau").remove()              // remove the element
$("#config").hide()                 // hide the element
```

Functions can be registered to be executed on events generated by some objects,
for instance on event `click` for a `button`:

```js
$("#aller").click(function () {
  alert("bouton Aller cliqué !")
})
```

To be sure to execute your js code once the whole page is loaded, put your code
in a function associated to `document` event `ready`:

```js
$(document).ready(function () {
  alert("document prêt, on peut commencer !")
})
```

Debug by opening the browser `dev tools` on a page.


## Setup

There are three initial files in directory web-app:
`kiva.html`, `kiva.css`, `kiva.js`.
Although it is possible to put everything in a single file,
we advise to avoid mixing different languages in the same file.

Create a `static` symbolic link within the `back-end` pointing to `web-app`,
`git add`, `git commit` and `git push`.

In a terminal tab, start you kiva back-end server.
Open the web-app from a browser with
[http://0.0.0.0:5000/static/kiva.html](http://0.0.0.0:5000/static/kiva.html)

Set the server configuration if necessary: base url, login, password.

Press `version` to get the back-end version and check that the web app has access
to the back-end.

Read and understand the three files provided for this front-end.
Function `req` performs an HTTP query with parameters, and execute
its 4th argument as a function, passing the returned result as
a parameter.

## Improve

1. Set the default url to the page origin + "/api"

   Help: build a [URL object](https://developer.mozilla.org/en-US/docs/Web/API/URL)
from the document URL and extract its origin…

1. Add a new division for the application itself.

1. Add two text input fields for `key` and `val`.

1. Add a `?` button which fills the `val` field from the current `key` by querying the back-end.

1. Add a `+` button which inserts a new key-value association.

1. Add a `-` button which removes an existing key-value association.

1. Add a `=` button which updates an existing key-value association.

1. Add an empty 2 column table.

1. Add a `!` button which lists the key-value store contents in the table.

1. Add a `.` button which clears the input fields and the table.

1. Add a navigation button which allows to switch between seeing only the
configuration division or the application division. Set the initial state
to show the configuration only.
